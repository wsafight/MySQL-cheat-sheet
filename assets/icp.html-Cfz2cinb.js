import{_ as i,c as l,b as a,o as n}from"./app--XYqrjBE.js";const t={};function s(r,e){return n(),l("div",null,e[0]||(e[0]=[a(`<h1 id="索引下推" tabindex="-1"><a class="header-anchor" href="#索引下推"><span>索引下推</span></a></h1><p>索引下推(Index Condition PushDown，简称ICP)，是MySQL5.6版本的新特性，它能减少回表查询次数，提高查询效率。</p><p>针对一张表使用联合索引的情况下</p><ul><li>MySQL 5.6 前会使用索引检索最左索引，然后回表在对比其他值</li><li>MySQL 5.6 后会使用索引检索最左索引，然后在检索查询语句中其他条件是否在联合索引中，如果在则继续过滤</li></ul><p>该功能默认开启，可以使用下述语句关闭索引下推。</p><div class="language-MYSQL line-numbers-mode" data-highlighter="prismjs" data-ext="MYSQL" data-title="MYSQL"><pre><code><span class="line">SET optimize_switch = &#39;index_condition_pushdown=off&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在满足一定的条件下，存储引擎层会在回表查询之前对数据进行过滤，可以减少存储引擎回表查询的次数。</p><p>下面是索引下推的条件：</p><ul><li>ICP 用于非聚簇索引，聚簇索引本省包含表数据，无需下推</li><li>ICP 需要使用联合索引</li><li>WHERE 条件是 and 而并非 or</li><li>ICP 不支持子查询为条件</li><li>ICP 不支持存储函数作为条件</li><li>ICP 不支持虚拟列上建立的索引</li><li>ICP 用于 range，ref，eq_ref,ref_or_null 访问方法</li></ul>`,9)]))}const p=i(t,[["render",s],["__file","icp.html.vue"]]),c=JSON.parse('{"path":"/mysql/performance/icp.html","title":"索引下推","lang":"zh-CN","frontmatter":{},"headers":[],"git":{"updatedTime":1691424102000,"contributors":[{"name":"wsafight","email":"984292420@qq.com","commits":1}]},"filePathRelative":"mysql/performance/icp.md"}');export{p as comp,c as data};
