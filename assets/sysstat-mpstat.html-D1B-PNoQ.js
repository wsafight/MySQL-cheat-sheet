import{_ as s,c as a,b as e,o as n}from"./app--XYqrjBE.js";const i="/server-study-notes/assets/sysstat-mpstat-CooTfHn9.png",r="/server-study-notes/assets/sysstat-mpstat-all-kSGmpm0C.png",l={};function d(p,t){return n(),a("div",null,t[0]||(t[0]=[e(`<h1 id="cpu-性能分析工具-mpstat" tabindex="-1"><a class="header-anchor" href="#cpu-性能分析工具-mpstat"><span>CPU 性能分析工具 mpstat</span></a></h1><p>mpstat 是一个多核 CPU 性能分析工具，用来实时查看每个 CPU 的性能指标，以及所有 CPU 的平均指标。</p><p>它需要在 Linux 系统上安装 sysstat。sysstat 包含了很多工具，用于监控和分析 Linux 系统性能。在使用之前需要安装对应的包。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">apt</span> <span class="token function">install</span> sysstat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装完成后，执行一下对应的命令。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">mpstat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+i+`" alt="mpstat"></p><p>这里只能看到全部 CPU 指标数据，没法看到每个对应的 CPU 状态。添加参数即可。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># -P ALL 表示监控所有的 CPU</span></span>
<span class="line"><span class="token comment"># 数字 3 表示每隔 3 s 输出一组数据</span></span>
<span class="line"><span class="token comment"># 后面还可以加一个数字表示采样次数，不加则循环采集</span></span>
<span class="line">mpstat <span class="token parameter variable">-P</span> ALL <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+r+'" alt="mpstat-all"></p><p>我们看一下对应的参数含义：</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>CPU</td><td>单个 CPU,还是全部 CPU</td></tr><tr><td>%usr</td><td>internal 时间段里，用户态的 CPU 时间(%)</td></tr><tr><td>%nice</td><td>internal 时间段里，“友好”进程的 CPU 时间(%)</td></tr><tr><td>%sys</td><td>internal 时间段里，内核的 CPU 时间(%)</td></tr><tr><td>$iowait</td><td>internal 时间段里，硬盘 IO 等待时间(%)</td></tr><tr><td>%irq</td><td>internal 时间段里，处理硬中断所占用的 CPU 时间(%)</td></tr><tr><td>%soft</td><td>internal 时间段里，处理软中断所占用的 CPU 时间(%)</td></tr><tr><td>%idle</td><td>CPU 除去等待磁盘 IO 操作外的因为任何原因而空闲的时间闲置时间(%)</td></tr></tbody></table><p>此外 %steal，%guest，%gnice 三个参数和使用虚拟机相关。</p><p>根据上述指标可以看到 CPU 处于空闲状态。当然了，作为学习，开发者可以监控时候实时使用软件，这样你就可以观测不同软件会对 CPU 有什么样的影响。会加深你对工具的理解。</p><p>注：以上所有操作均在虚拟机 Ubuntu 22.04 GUI 系统。</p>',15)]))}const m=s(l,[["render",d],["__file","sysstat-mpstat.html.vue"]]),o=JSON.parse('{"path":"/linux/performance/sysstat-mpstat.html","title":"CPU 性能分析工具 mpstat","lang":"zh-CN","frontmatter":{},"headers":[],"git":{"updatedTime":1699578342000,"contributors":[{"name":"wsafight","email":"984292420@qq.com","commits":3}]},"filePathRelative":"linux/performance/sysstat-mpstat.md"}');export{m as comp,o as data};
